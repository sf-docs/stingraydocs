# Система дистрибуции Nexus Repository

## Параметры запуска

Параметры запуска зависят от расположения файла apk, отправляемого на анализ. Так же, существуют обязательные параметры, которые необходимо указывать при любом виде запуска:

* `url` — сетевой адрес Stingray (путь до корня без последнего «/»), при использовании cloud версии — [https://saas.stingray-mobile.ru](https://saas.stingray-mobile.ru);
* `profile_id` — id профиля, для которого проводится анализ;
* `testcase_id` — id того тест-кейса, который будет воспроизведен во время анализа; возможен запуск нескольких тест-кейсов, для этого их id перечисляются через пробел. Это необязательный параметр, если он не задан, то будет запущено сканирование в ручном режиме и через 20 секунд после запуска остановлено, а данные отправлены на анализ;
* `token` — CI/CD токен для доступа, более подробная информация приведена в разделе «[Интеграции](./integracii.md)» Руководства пользователя;
* `distribution_system` — способ загрузки приложения, возможные опции: `file`, `google_play`, `appstore`, `firebase`, `appcenter`, `nexus`. Более подробно про них описано ниже в соответствующих разделах;
* `company_id` — идентификатор компании, в рамках которой будет осуществлено сканирование;
* `architecture_id` — опциональный параметр. Определяет идентификатор архитектуры операционной системы, на которой будет произведено сканирование;
* `nowait` — опциональный параметр, определяющий необходимость ожидания завершения сканирования. Если данный флаг установлен — скрипт не будет дожидаться завершения сканирования, а выйдет сразу же после запуска. Если флаг не установлен — скрипт будет ожидать завершения процесса анализа и формировать отчет;
* `summary_report_json_file_name` — опциональный параметр. Определяет имя JSON файла, в который выгружается информация по сканированию в формате JSON. При отсутствии параметра информация сохраняться в JSON не будет;
* `pdf_report_file_name` — опциональный параметр. Определяет имя PDF файла в который выгружается информация по сканированию в формате PDF. При отсутствии параметра PDF-отчет сохраняться не будет.

Чтобы скачать приложение с maven-репозитория необходимо знать, где оно находится, а также его `group_id`, `artifact_id` и `version`. Для загрузки мобильного приложения в Nexus можно использовать сниппеты для Android-пакетов (\*.apk) или для iOS (\*.ipa). Необходимо в качестве агрумента параметра `distribution_system` указать nexus, а также использовать следующие обязательные параметры:

* `nexus_url` — URL сервера Nexus, на котором находится мобильное приложение;
* `nexus_login` — имя пользователя Nexus с правами доступа к репозиторию, в котором находится мобильное приложение;
* `nexus_password` — пароль учетной записи Nexus;
* `nexus_repo_name` — имя Nexus-репозитория, в котором находится мобильное приложение;
* `nexus_group_id` — group_id мобильного приложения, загруженного с maven;
* `nexus_artifact_id` — artifact_id мобильного приложения, загруженного с maven;
* `nexus_version` — версия мобильного приложения, загруженного с maven.